(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{1599:(e,t,a)=>{"use strict";a.d(t,{CartDrawer:()=>A});var s=a(5155),n=a(2115),o=a(5452),r=a(4416),i=a(3999);function l(e){let{...t}=e;return(0,s.jsx)(o.bL,{"data-slot":"sheet",...t})}function d(e){let{...t}=e;return(0,s.jsx)(o.ZL,{"data-slot":"sheet-portal",...t})}function c(e){let{className:t,...a}=e;return(0,s.jsx)(o.hJ,{"data-slot":"sheet-overlay",className:(0,i.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...a})}function u(e){let{className:t,children:a,side:n="right",...l}=e;return(0,s.jsxs)(d,{children:[(0,s.jsx)(c,{}),(0,s.jsxs)(o.UC,{"data-slot":"sheet-content",className:(0,i.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out fixed z-50 flex flex-col gap-4 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500","right"===n&&"data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right inset-y-0 right-0 h-full w-3/4 border-l sm:max-w-sm","left"===n&&"data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left inset-y-0 left-0 h-full w-3/4 border-r sm:max-w-sm","top"===n&&"data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top inset-x-0 top-0 h-auto border-b","bottom"===n&&"data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom inset-x-0 bottom-0 h-auto border-t",t),...l,children:[a,(0,s.jsxs)(o.bm,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-secondary absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none",children:[(0,s.jsx)(r.A,{className:"size-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function m(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"sheet-header",className:(0,i.cn)("flex flex-col gap-1.5 p-4",t),...a})}function x(e){let{className:t,...a}=e;return(0,s.jsx)(o.hE,{"data-slot":"sheet-title",className:(0,i.cn)("text-foreground font-semibold",t),...a})}var p=a(7168),h=a(9852),f=a(8145),g=a(6037),v=a(8232),b=a(6151),j=a(7712),N=a(4616),w=a(2525),y=a(3580),S=a(5695);function A(){let{items:e,isOpen:t,closeCart:a,removeItem:o,updateQuantity:r,deliveryFee:i,couponCode:d,couponDiscount:c,applyCoupon:A,removeCoupon:C,getSubtotal:k,getTotal:z,clearCart:E}=(0,v.x)(),[P,R]=(0,n.useState)(""),[T,O]=(0,n.useState)(""),{toast:_}=(0,y.dj)(),I=(0,S.useRouter)(),M=k(),F=z(),L=e=>{let t=[];return Object.values(e).forEach(e=>{Array.isArray(e)?e.forEach(e=>{t.push(e.name)}):e&&t.push(e.name)}),t.join(", ")},$=M>=9;return(0,s.jsx)(l,{open:t,onOpenChange:a,children:(0,s.jsxs)(u,{className:"w-full sm:max-w-lg flex flex-col",children:[(0,s.jsx)(m,{children:(0,s.jsxs)(x,{className:"flex items-center gap-2",children:[(0,s.jsx)(b.A,{className:"w-5 h-5"}),"Seu pedido"]})}),0===e.length?(0,s.jsx)("div",{className:"flex-1 flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)(b.A,{className:"w-12 h-12 mx-auto text-muted-foreground mb-4"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Seu carrinho est\xe1 vazio"})]})}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"flex-1 overflow-y-auto space-y-4",children:e.map(e=>(0,s.jsxs)("div",{className:"flex gap-3 p-3 bg-muted/50 rounded-lg",children:[(0,s.jsx)("img",{src:e.image||"/placeholder.svg",alt:e.name,className:"w-16 h-16 object-cover rounded"}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("h4",{className:"font-medium truncate",children:e.name}),Object.keys(e.modifiers).length>0&&(0,s.jsx)("p",{className:"text-sm text-muted-foreground truncate",children:L(e.modifiers)}),e.notes&&(0,s.jsxs)("p",{className:"text-sm text-muted-foreground italic",children:['"',e.notes,'"']}),(0,s.jsxs)("div",{className:"flex items-center justify-between mt-2",children:[(0,s.jsxs)("span",{className:"font-medium",children:["R$ ",e.totalPrice.toFixed(2)]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(p.$,{variant:"outline",size:"sm",onClick:()=>r(e.id,e.quantity-1),className:"w-8 h-8 p-0",children:(0,s.jsx)(j.A,{className:"w-3 h-3"})}),(0,s.jsx)("span",{className:"w-8 text-center text-sm",children:e.quantity}),(0,s.jsx)(p.$,{variant:"outline",size:"sm",onClick:()=>r(e.id,e.quantity+1),className:"w-8 h-8 p-0",children:(0,s.jsx)(N.A,{className:"w-3 h-3"})}),(0,s.jsx)(p.$,{variant:"ghost",size:"sm",onClick:()=>o(e.id),className:"w-8 h-8 p-0 text-destructive hover:text-destructive",children:(0,s.jsx)(w.A,{className:"w-3 h-3"})})]})]})]})]},e.id))}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)(g.w,{}),d?(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(f.E,{variant:"secondary",children:d}),(0,s.jsxs)("span",{className:"text-sm text-green-600",children:["-R$ ",c.toFixed(2)]})]}),(0,s.jsx)(p.$,{variant:"ghost",size:"sm",onClick:C,children:"Remover"})]}):(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(h.p,{placeholder:"C\xf3digo do cupom",value:P,onChange:e=>{R(e.target.value.toUpperCase()),O("")}}),(0,s.jsx)(p.$,{variant:"outline",onClick:()=>{O(""),A(P)?(R(""),_({title:"Cupom aplicado!",description:"Desconto de R$ ".concat(c.toFixed(2)," aplicado.")})):M<30?O("Pedido m\xednimo de R$ 30,00 para este cupom"):O("Cupom inv\xe1lido ou expirado")},disabled:!P,children:"Aplicar"})]}),T&&(0,s.jsx)("p",{className:"text-sm text-destructive",children:T})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(g.w,{}),(0,s.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{children:"Subtotal"}),(0,s.jsxs)("span",{children:["R$ ",M.toFixed(2)]})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{children:"Taxa de entrega"}),(0,s.jsxs)("span",{children:["R$ ",i.toFixed(2)]})]}),c>0&&(0,s.jsxs)("div",{className:"flex justify-between text-green-600",children:[(0,s.jsx)("span",{children:"Desconto"}),(0,s.jsxs)("span",{children:["-R$ ",c.toFixed(2)]})]}),(0,s.jsx)(g.w,{}),(0,s.jsxs)("div",{className:"flex justify-between font-semibold",children:[(0,s.jsx)("span",{children:"Total"}),(0,s.jsxs)("span",{children:["R$ ",F.toFixed(2)]})]})]}),!$&&(0,s.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Pedido m\xednimo: R$ ","9.00"," (faltam R$ ",(9-M).toFixed(2),")"]}),(0,s.jsx)(p.$,{className:"w-full",size:"lg",disabled:!$,onClick:()=>{a(),I.push("/checkout")},children:"Ir para pagamento"}),(0,s.jsx)(p.$,{variant:"ghost",size:"sm",onClick:E,className:"w-full",children:"Limpar carrinho"})]})]})]})})}},3580:(e,t,a)=>{"use strict";a.d(t,{dj:()=>m});var s=a(2115);let n=0,o=new Map,r=e=>{if(o.has(e))return;let t=setTimeout(()=>{o.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);o.set(e,t)},i=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:a}=t;return a?r(a):e.toasts.forEach(e=>{r(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===a||void 0===a?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},l=[],d={toasts:[]};function c(e){d=i(d,e),l.forEach(e=>{e(d)})}function u(e){let{...t}=e,a=(n=(n+1)%Number.MAX_SAFE_INTEGER).toString(),s=()=>c({type:"DISMISS_TOAST",toastId:a});return c({type:"ADD_TOAST",toast:{...t,id:a,open:!0,onOpenChange:e=>{e||s()}}}),{id:a,dismiss:s,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:a}})}}function m(){let[e,t]=s.useState(d);return s.useEffect(()=>(l.push(t),()=>{let e=l.indexOf(t);e>-1&&l.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},3999:(e,t,a)=>{"use strict";a.d(t,{cn:()=>o});var s=a(2596),n=a(9688);function o(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,n.QP)((0,s.$)(t))}},6037:(e,t,a)=>{"use strict";a.d(t,{w:()=>r});var s=a(5155);a(2115);var n=a(7489),o=a(3999);function r(e){let{className:t,orientation:a="horizontal",decorative:r=!0,...i}=e;return(0,s.jsx)(n.b,{"data-slot":"separator",decorative:r,orientation:a,className:(0,o.cn)("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",t),...i})}},6078:(e,t,a)=>{"use strict";a.d(t,{AddressSelector:()=>d});var s=a(5155),n=a(2115),o=a(4516),r=a(5453),i=a(6786);let l=(0,r.v)()((0,i.Zr)((e,t)=>({address:null,setAddress:t=>e({address:t}),clearAddress:()=>e({address:null}),getFormattedAddress:()=>{let{address:e}=t();return e?"".concat(e.street,", ").concat(e.number).concat(e.complement?", ".concat(e.complement):""," - ").concat(e.neighborhood,", ").concat(e.city,"/").concat(e.state):""}}),{name:"address-storage"}));function d(){let{address:e}=l(),[t,a]=(0,n.useState)(null),r=()=>{let e=localStorage.getItem("userLocation");if(e)try{let t=JSON.parse(e);a(t)}catch(e){console.error("Error parsing saved location:",e)}};(0,n.useEffect)(()=>{r();let e=e=>{"userLocation"===e.key&&r()},t=()=>{r()},a=setInterval(r,1e3);return window.addEventListener("storage",e),window.addEventListener("focus",t),()=>{window.removeEventListener("storage",e),window.removeEventListener("focus",t),clearInterval(a)}},[]);let i=e=>({acre:"AC",alagoas:"AL",amapá:"AP",amazonas:"AM",bahia:"BA",ceará:"CE","distrito federal":"DF","esp\xedrito santo":"ES",goiás:"GO",maranhão:"MA","mato grosso":"MT","mato grosso do sul":"MS","minas gerais":"MG",pará:"PA",paraíba:"PB",paraná:"PR",pernambuco:"PE",piauí:"PI","rio de janeiro":"RJ","rio grande do norte":"RN","rio grande do sul":"RS",rondônia:"RO",roraima:"RR","santa catarina":"SC","s\xe3o paulo":"SP",sergipe:"SE",tocantins:"TO"})[e.toLowerCase()]||e.toUpperCase();return(0,s.jsx)("div",{className:"bg-muted/50 border-b",children:(0,s.jsxs)("div",{className:"container mx-auto px-4 py-3",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(o.A,{className:"w-4 h-4 text-primary"}),(0,s.jsx)("span",{className:"text-sm font-medium",children:t?"".concat(t.city,", ").concat(i(t.state)):e&&e.city&&e.state?"".concat(e.city,", ").concat(i(e.state)):"Localiza\xe7\xe3o n\xe3o detectada"})]}),(e||t)&&(0,s.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Entrega a partir de R$ 5,90 • Estimativa 30–45 min"})]})})}},6427:(e,t,a)=>{"use strict";a.d(t,{SearchHeader:()=>u});var s=a(5155),n=a(2115),o=a(7924),r=a(1007),i=a(7809),l=a(7168),d=a(9852),c=a(8232);function u(){let[e,t]=(0,n.useState)(""),{openCart:a,getItemCount:u}=(0,c.x)(),{animateCartIcon:m}={animateCartIcon:(0,n.useCallback)(()=>{let e=document.querySelector("[data-cart-button]");e&&(e.classList.add("animate-bounce"),setTimeout(()=>{e.classList.remove("animate-bounce")},600))},[])},x=u();return(0,s.jsx)("header",{className:"sticky top-0 z-50 bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60 border-b",children:(0,s.jsx)("div",{className:"container mx-auto px-4 py-3",children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"flex items-center",children:(0,s.jsx)("img",{src:"https://hebbkx1anhila5yf.public.blob.vercel-storage.com/hd_restoration_result_image%20%2833%29-LojYQMT3TESSlducqoRpZZpMFZKI2M.png",alt:"Logo",className:"h-8 w-auto object-contain"})}),(0,s.jsx)("div",{className:"flex-1 max-w-md",children:(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(o.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),(0,s.jsx)(d.p,{placeholder:"Buscar restaurantes...",value:e,onChange:e=>t(e.target.value),className:"pl-10 h-9 text-sm"})]})}),(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsxs)(l.$,{variant:"ghost",size:"sm",className:"hidden md:flex",children:[(0,s.jsx)(r.A,{className:"w-4 h-4 mr-2"}),"Entrar"]}),(0,s.jsxs)(l.$,{variant:"ghost",size:"sm",className:"relative transition-transform hover:scale-105 p-2",onClick:()=>{m(),a()},"data-cart-button":!0,children:[(0,s.jsx)(i.A,{className:"w-5 h-5"}),x>0&&(0,s.jsx)("span",{className:"absolute -top-1 -right-1 bg-primary text-primary-foreground text-xs rounded-full w-5 h-5 flex items-center justify-center animate-in fade-in-0 zoom-in-50",children:x})]})]})]})})})}},6865:(e,t,a)=>{"use strict";a.d(t,{WelcomeModal:()=>y});var s=a(5155),n=a(2115),o=a(9840),r=a(7168),i=a(4842),l=a(6474),d=a(5196),c=a(7863),u=a(3999);function m(e){let{...t}=e;return(0,s.jsx)(i.bL,{"data-slot":"select",...t})}function x(e){let{...t}=e;return(0,s.jsx)(i.WT,{"data-slot":"select-value",...t})}function p(e){let{className:t,size:a="default",children:n,...o}=e;return(0,s.jsxs)(i.l9,{"data-slot":"select-trigger","data-size":a,className:(0,u.cn)("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...o,children:[n,(0,s.jsx)(i.In,{asChild:!0,children:(0,s.jsx)(l.A,{className:"size-4 opacity-50"})})]})}function h(e){let{className:t,children:a,position:n="popper",...o}=e;return(0,s.jsx)(i.ZL,{children:(0,s.jsxs)(i.UC,{"data-slot":"select-content",className:(0,u.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md","popper"===n&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...o,children:[(0,s.jsx)(g,{}),(0,s.jsx)(i.LM,{className:(0,u.cn)("p-1","popper"===n&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:a}),(0,s.jsx)(v,{})]})})}function f(e){let{className:t,children:a,...n}=e;return(0,s.jsxs)(i.q7,{"data-slot":"select-item",className:(0,u.cn)("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",t),...n,children:[(0,s.jsx)("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:(0,s.jsx)(i.VF,{children:(0,s.jsx)(d.A,{className:"size-4"})})}),(0,s.jsx)(i.p4,{children:a})]})}function g(e){let{className:t,...a}=e;return(0,s.jsx)(i.PP,{"data-slot":"select-scroll-up-button",className:(0,u.cn)("flex cursor-default items-center justify-center py-1",t),...a,children:(0,s.jsx)(c.A,{className:"size-4"})})}function v(e){let{className:t,...a}=e;return(0,s.jsx)(i.wn,{"data-slot":"select-scroll-down-button",className:(0,u.cn)("flex cursor-default items-center justify-center py-1",t),...a,children:(0,s.jsx)(l.A,{className:"size-4"})})}var b=a(1154),j=a(4516),N=a(646);let w=[{code:"AC",name:"Acre"},{code:"AL",name:"Alagoas"},{code:"AP",name:"Amap\xe1"},{code:"AM",name:"Amazonas"},{code:"BA",name:"Bahia"},{code:"CE",name:"Cear\xe1"},{code:"DF",name:"Distrito Federal"},{code:"ES",name:"Esp\xedrito Santo"},{code:"GO",name:"Goi\xe1s"},{code:"MA",name:"Maranh\xe3o"},{code:"MT",name:"Mato Grosso"},{code:"MS",name:"Mato Grosso do Sul"},{code:"MG",name:"Minas Gerais"},{code:"PA",name:"Par\xe1"},{code:"PB",name:"Para\xedba"},{code:"PR",name:"Paran\xe1"},{code:"PE",name:"Pernambuco"},{code:"PI",name:"Piau\xed"},{code:"RJ",name:"Rio de Janeiro"},{code:"RN",name:"Rio Grande do Norte"},{code:"RS",name:"Rio Grande do Sul"},{code:"RO",name:"Rond\xf4nia"},{code:"RR",name:"Roraima"},{code:"SC",name:"Santa Catarina"},{code:"SP",name:"S\xe3o Paulo"},{code:"SE",name:"Sergipe"},{code:"TO",name:"Tocantins"}];function y(){var e,t;let[a,i]=(0,n.useState)(!1),[l,d]=(0,n.useState)("detecting"),[c,u]=(0,n.useState)(""),[g,v]=(0,n.useState)(""),[y,S]=(0,n.useState)(""),[A,C]=(0,n.useState)(""),[k,z]=(0,n.useState)(!1);(0,n.useEffect)(()=>{console.log("[v0] WelcomeModal mounted"),i(!0),E()},[]);let E=async()=>{console.log("[v0] Starting IP-based location detection"),d("detecting");try{let e=await fetch("/api/detect-location"),t=await e.json();console.log("[v0] IP location detected:",t),t.success?(v(t.stateCode),u(t.stateCode),S(t.city),d("state-detected")):d("state")}catch(e){console.error("[v0] IP detection failed:",e),d("state")}},P=()=>{console.log("[v0] Closing welcome modal"),i(!1),localStorage.setItem("hasSeenWelcome","true")};return console.log("[v0] WelcomeModal render - isOpen:",a,"step:",l),(0,s.jsx)(o.lG,{open:a,onOpenChange:i,children:(0,s.jsx)(o.Cf,{className:"sm:max-w-md mx-auto rounded-lg",children:(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center text-center py-8 px-2",children:["detecting"===l&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"w-16 h-16 mx-auto mb-6 flex items-center justify-center",children:(0,s.jsx)(b.A,{className:"w-8 h-8 text-red-500 animate-spin"})}),(0,s.jsx)("h2",{className:"text-2xl font-bold mb-3",children:"Detectando sua localiza\xe7\xe3o..."}),(0,s.jsx)("p",{className:"text-muted-foreground px-2",children:"Aguarde enquanto identificamos seu estado"})]}),"state-detected"===l&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(j.A,{className:"w-16 h-16 text-red-500 mx-auto mb-6"}),(0,s.jsx)("h2",{className:"text-2xl font-bold mb-3",children:"Estado detectado!"}),(0,s.jsxs)("p",{className:"text-lg font-medium mb-2",children:["Estado:"," ",(0,s.jsx)("span",{className:"text-red-500",children:null===(e=w.find(e=>e.code===g))||void 0===e?void 0:e.name})]}),(0,s.jsx)("p",{className:"text-muted-foreground mb-6 px-2",children:"Agora vamos localizar sua cidade exata"}),(0,s.jsxs)("div",{className:"w-full max-w-sm space-y-3",children:[(0,s.jsxs)(r.$,{onClick:()=>{d("locating-city"),setTimeout(()=>{C(y);let e=w.find(e=>e.code===g),t=(null==e?void 0:e.name)||"S\xe3o Paulo";console.log("[v0] Saving detected location to localStorage:",{city:y,state:t}),localStorage.setItem("userLocation",JSON.stringify({city:y,state:t})),window.dispatchEvent(new CustomEvent("locationUpdated")),d("success")},1500)},className:"w-full bg-red-500 hover:bg-red-600 text-white py-3 rounded-lg font-medium",children:[(0,s.jsx)(j.A,{className:"w-4 h-4 mr-2"}),"Localizar cidade"]}),(0,s.jsx)(r.$,{variant:"outline",onClick:()=>d("state"),className:"w-full text-sm",children:"Alterar estado"})]})]}),"locating-city"===l&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"w-16 h-16 mx-auto mb-6 flex items-center justify-center",children:(0,s.jsx)(b.A,{className:"w-8 h-8 text-red-500 animate-spin"})}),(0,s.jsx)("h2",{className:"text-2xl font-bold mb-3",children:"Localizando cidade..."}),(0,s.jsx)("p",{className:"text-muted-foreground px-2",children:"Aguarde enquanto identificamos sua cidade exata"})]}),"state"===l&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(j.A,{className:"w-16 h-16 text-red-500 mx-auto mb-6"}),(0,s.jsx)("h2",{className:"text-2xl font-bold mb-3",children:"Bem-vindo!"}),(0,s.jsx)("p",{className:"text-muted-foreground mb-8 px-2",children:"Para come\xe7ar, selecione seu estado:"}),(0,s.jsx)("div",{className:"w-full max-w-sm",children:(0,s.jsxs)(m,{onValueChange:e=>{u(e),d("city")},value:c,children:[(0,s.jsx)(p,{className:"w-full",children:(0,s.jsx)(x,{placeholder:"Selecione seu estado"})}),(0,s.jsx)(h,{children:w.map(e=>(0,s.jsx)(f,{value:e.code,children:e.name},e.code))})]})})]}),"city"===l&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(j.A,{className:"w-16 h-16 text-red-500 mx-auto mb-6"}),(0,s.jsx)("h2",{className:"text-2xl font-bold mb-3",children:"Agora selecione sua cidade"}),(0,s.jsxs)("p",{className:"text-muted-foreground mb-4 px-2",children:["Estado:"," ",(0,s.jsx)("span",{className:"font-medium",children:null===(t=w.find(e=>e.code===c))||void 0===t?void 0:t.name})]}),(0,s.jsxs)("div",{className:"w-full max-w-sm space-y-4",children:[(0,s.jsxs)(m,{onValueChange:e=>{C(e);let t=w.find(e=>e.code===c),a=(null==t?void 0:t.name)||"S\xe3o Paulo";console.log("[v0] Saving location to localStorage:",{city:e,state:a}),localStorage.setItem("userLocation",JSON.stringify({city:e,state:a})),window.dispatchEvent(new CustomEvent("locationUpdated")),d("success")},children:[(0,s.jsx)(p,{className:"w-full",children:(0,s.jsx)(x,{placeholder:"Selecione sua cidade"})}),(0,s.jsxs)(h,{children:[(0,s.jsx)(f,{value:"Presidente Epit\xe1cio",children:"Presidente Epit\xe1cio"}),(0,s.jsx)(f,{value:"S\xe3o Paulo",children:"S\xe3o Paulo"}),(0,s.jsx)(f,{value:"Rio de Janeiro",children:"Rio de Janeiro"}),(0,s.jsx)(f,{value:"Belo Horizonte",children:"Belo Horizonte"}),(0,s.jsx)(f,{value:"Bras\xedlia",children:"Bras\xedlia"}),(0,s.jsx)(f,{value:"Salvador",children:"Salvador"}),(0,s.jsx)(f,{value:"Fortaleza",children:"Fortaleza"}),(0,s.jsx)(f,{value:"Recife",children:"Recife"}),(0,s.jsx)(f,{value:"Porto Alegre",children:"Porto Alegre"}),(0,s.jsx)(f,{value:"Curitiba",children:"Curitiba"})]})]}),(0,s.jsx)(r.$,{variant:"outline",onClick:()=>d("state"),className:"w-full text-sm",children:"Voltar para estados"})]})]}),"success"===l&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(N.A,{className:"w-16 h-16 text-green-500 mx-auto mb-6"}),(0,s.jsx)("h2",{className:"text-2xl font-bold mb-3",children:"Localiza\xe7\xe3o encontrada!"}),(0,s.jsx)("p",{className:"text-lg font-medium mb-2",children:A}),(0,s.jsx)("p",{className:"text-green-600 font-medium mb-4",children:"Temos uma unidade a 2,7 km de voc\xea!"}),(0,s.jsx)(r.$,{variant:"outline",onClick:()=>{d("state")},className:"mb-4 text-sm bg-transparent",children:"Alterar localiza\xe7\xe3o"}),(0,s.jsx)("div",{className:"w-full max-w-sm",children:(0,s.jsx)(r.$,{onClick:()=>{console.log("[v0] View promotions clicked"),P();let e=document.querySelector("main");e&&e.scrollIntoView({behavior:"smooth"})},className:"w-full bg-red-500 hover:bg-red-600 text-white py-3 rounded-lg font-medium",children:"Ver promo\xe7\xf5es"})})]})]})})})}},7168:(e,t,a)=>{"use strict";a.d(t,{$:()=>l});var s=a(5155);a(2115);var n=a(9708),o=a(2085),r=a(3999);let i=(0,o.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function l(e){let{className:t,variant:a,size:o,asChild:l=!1,...d}=e,c=l?n.DX:"button";return(0,s.jsx)(c,{"data-slot":"button",className:(0,r.cn)(i({variant:a,size:o,className:t})),...d})}},8145:(e,t,a)=>{"use strict";a.d(t,{E:()=>l});var s=a(5155);a(2115);var n=a(9708),o=a(2085),r=a(3999);let i=(0,o.F)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function l(e){let{className:t,variant:a,asChild:o=!1,...l}=e,d=o?n.DX:"span";return(0,s.jsx)(d,{"data-slot":"badge",className:(0,r.cn)(i({variant:a}),t),...l})}},8232:(e,t,a)=>{"use strict";a.d(t,{x:()=>r});var s=a(5453),n=a(6786);let o=(e,t,a)=>{let s=e.basePrice;return Object.values(t).forEach(e=>{Array.isArray(e)?e.forEach(e=>{s+=e.price}):e&&(s+=e.price)}),s*a},r=(0,s.v)()((0,n.Zr)((e,t)=>({items:[],isOpen:!1,deliveryFee:6.9,couponCode:"",couponDiscount:0,addItem:(t,a,s,n)=>{let r=o(t,a,s),i={id:"".concat(t.id,"-").concat(Date.now()),name:t.name,description:t.description,image:t.image,basePrice:t.basePrice,quantity:s,modifiers:a,notes:n,totalPrice:r};e(e=>({items:[...e.items,i]}))},removeItem:t=>{e(e=>({items:e.items.filter(e=>e.id!==t)}))},updateQuantity:(a,s)=>{if(s<=0){t().removeItem(a);return}e(e=>({items:e.items.map(e=>{if(e.id===a){let t=e.totalPrice/e.quantity*s;return{...e,quantity:s,totalPrice:t}}return e})}))},clearCart:()=>{e({items:[],couponCode:"",couponDiscount:0})},openCart:()=>e({isOpen:!0}),closeCart:()=>e({isOpen:!1}),applyCoupon:a=>{let s={BEMVINDO10:{type:"percent",value:10,minSubtotal:30},FRETE5:{type:"fixed",value:5,minSubtotal:20}}[a],n=t().getSubtotal();return!!s&&!(n<s.minSubtotal)&&(e({couponCode:a,couponDiscount:"percent"===s.type?n*s.value/100:s.value}),!0)},removeCoupon:()=>{e({couponCode:"",couponDiscount:0})},getSubtotal:()=>t().items.reduce((e,t)=>e+t.totalPrice,0),getTotal:()=>{let e=t().getSubtotal(),{deliveryFee:a,couponDiscount:s}=t();return Math.max(0,e+a-s)},getItemCount:()=>t().items.reduce((e,t)=>e+t.quantity,0)}),{name:"cart-storage"}))},9064:(e,t,a)=>{Promise.resolve().then(a.bind(a,6078)),Promise.resolve().then(a.bind(a,1599)),Promise.resolve().then(a.bind(a,6427)),Promise.resolve().then(a.bind(a,6865)),Promise.resolve().then(a.t.bind(a,6874,23))},9840:(e,t,a)=>{"use strict";a.d(t,{Cf:()=>c,L3:()=>m,c7:()=>u,lG:()=>i});var s=a(5155);a(2115);var n=a(5452),o=a(4416),r=a(3999);function i(e){let{...t}=e;return(0,s.jsx)(n.bL,{"data-slot":"dialog",...t})}function l(e){let{...t}=e;return(0,s.jsx)(n.ZL,{"data-slot":"dialog-portal",...t})}function d(e){let{className:t,...a}=e;return(0,s.jsx)(n.hJ,{"data-slot":"dialog-overlay",className:(0,r.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...a})}function c(e){let{className:t,children:a,showCloseButton:i=!0,...c}=e;return(0,s.jsxs)(l,{"data-slot":"dialog-portal",children:[(0,s.jsx)(d,{}),(0,s.jsxs)(n.UC,{"data-slot":"dialog-content",className:(0,r.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",t),...c,children:[a,i&&(0,s.jsxs)(n.bm,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,s.jsx)(o.A,{}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function u(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"dialog-header",className:(0,r.cn)("flex flex-col gap-2 text-center sm:text-left",t),...a})}function m(e){let{className:t,...a}=e;return(0,s.jsx)(n.hE,{"data-slot":"dialog-title",className:(0,r.cn)("text-lg leading-none font-semibold",t),...a})}},9852:(e,t,a)=>{"use strict";a.d(t,{p:()=>o});var s=a(5155);a(2115);var n=a(3999);function o(e){let{className:t,type:a,...o}=e;return(0,s.jsx)("input",{type:a,"data-slot":"input",className:(0,n.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t),...o})}}},e=>{var t=t=>e(e.s=t);e.O(0,[455,150,710,948,559,441,684,358],()=>t(9064)),_N_E=e.O()}]);


// ================= COMPONENTE ATUALIZADO =================

import React, { useState, useEffect } from "react";

function AddressSelector({ onChange }) {
  const [states, setStates] = useState([]);
  const [cities, setCities] = useState([]);
  const [selectedState, setSelectedState] = useState("");
  const [selectedCity, setSelectedCity] = useState("");

  useEffect(() => {
    fetch("https://servicodados.ibge.gov.br/api/v1/localidades/estados?orderBy=nome")
      .then(res => res.json())
      .then(data => setStates(data))
      .catch(() => setStates([]));
  }, []);

  useEffect(() => {
    if (selectedState) {
      fetch(\`https://servicodados.ibge.gov.br/api/v1/localidades/estados/\${selectedState}/municipios\`)
        .then(res => res.json())
        .then(data => setCities(data))
        .catch(() => setCities([]));
    } else {
      setCities([]);
    }
  }, [selectedState]);

  const handleStateChange = (e) => {
    const ufId = e.target.value;
    setSelectedState(ufId);
    setSelectedCity("");
    onChange({ state: ufId, city: "" });
  };

  const handleCityChange = (e) => {
    const cityName = e.target.value;
    setSelectedCity(cityName);
    onChange({ state: selectedState, city: cityName });
  };

  return (
    <div>
      <label>Estado:</label>
      <select value={selectedState} onChange={handleStateChange}>
        <option value="">Selecione</option>
        {states.map((uf) => (
          <option key={uf.id} value={uf.id}>{uf.nome}</option>
        ))}
      </select>

      <label>Cidade:</label>
      <select value={selectedCity} onChange={handleCityChange} disabled={!selectedState}>
        <option value="">Selecione</option>
        {cities.map((city) => (
          <option key={city.id} value={city.nome}>{city.nome}</option>
        ))}
      </select>
    </div>
  );
}

function WelcomeModal({ isOpen, onClose, onSave }) {
  const [address, setAddress] = useState({ state: "", city: "" });

  if (!isOpen) return null;

  const handleSave = () => {
    if (address.state && address.city) {
      onSave(address);
      onClose();
    } else {
      alert("Por favor, selecione um estado e uma cidade.");
    }
  };

  return (
    <div style={{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.6)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999}}>
      <div style={{background:"#fff",padding:"20px",borderRadius:"8px",maxWidth:"400px",width:"100%"}}>
        <h2>Bem-vindo!</h2>
        <p>Por favor, selecione sua localização:</p>

        <AddressSelector onChange={setAddress} />

        <div style={{marginTop:"20px",textAlign:"right"}}>
          <button onClick={onClose} style={{marginRight:"10px"}}>Cancelar</button>
          <button onClick={handleSave}>Confirmar</button>
        </div>
      </div>
    </div>
  );
}

export { WelcomeModal, AddressSelector };
// =========================================================
